# Синхронизация с Кормителем

ID: 117
Status: Есть Постановка
Sub-task: Добавить эдпоинт POST и GET с фильтром по дате (%D0%94%D0%BE%D0%B1%D0%B0%D0%B2%D0%B8%D1%82%D1%8C%20%D1%8D%D0%B4%D0%BF%D0%BE%D0%B8%D0%BD%D1%82%20POST%20%D0%B8%20GET%20%D1%81%20%D1%84%D0%B8%D0%BB%D1%8C%D1%82%D1%80%D0%BE%D0%BC%20%D0%BF%D0%BE%20%D0%B4%D0%B0%D1%82%D0%B5%20ec044e8e67804ccaaee80d8d1205aade.md), Реализовать GET выборку по дате (%D0%A0%D0%B5%D0%B0%D0%BB%D0%B8%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D1%8C%20GET%20%D0%B2%D1%8B%D0%B1%D0%BE%D1%80%D0%BA%D1%83%20%D0%BF%D0%BE%20%D0%B4%D0%B0%D1%82%D0%B5%207d41fd59f8b6403a86e484bb9a891d63.md), Реализовать POST сохранение   (%D0%A0%D0%B5%D0%B0%D0%BB%D0%B8%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D1%8C%20POST%20%D1%81%D0%BE%D1%85%D1%80%D0%B0%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5%2045da8a8f7f8e4cc9ac7a37fcfffe3d9e.md)
Tags: Кормитель

сваггер по апи синхронизации от команды Кормителя - [https://insomnia-it.github.io/feed/](https://insomnia-it.github.io/feed/). 

Сам сваггер файлом - [https://github.com/Insomnia-IT/feed/blob/main/docs/swaggers/synchronization.yaml](https://github.com/Insomnia-IT/feed/blob/main/docs/swaggers/synchronization.yaml)

А что у нас с удалением? Леша вроде хотел сделать какие-то ивенты?

# Примеры запросов

```jsx
GET /sync?from_date=2024-01-01T12:12:00Z
{
	badges: {
		inserted: [
			{ id: 1, name: '123' }
	],
	updated: [
		{ id: 1, name: '123' }
	],
	deleted: [1, 2, 3]
},
arrivals: {
	inserted: [
		{ id: 1, name: '123' }
	],
	updated: [
		{ id: 1, name: '123' }
	],
	deleted: [1, 2, 3]
},
	engagements: {
	inserted: [],
	updated: [],
	deleted: []
},
...
}
```

```jsx
POST /back-sync
{
	from_date: "2024-01-01T12:12:00Z",
	badges: {
		inserted: [
			{ id: "guid", badge: "guid", data: { name: 'новое имя', notion_id: null } }
		],
		updated: [
			{ id: "guid", badge: "guid", data: { name: 'новое имя', notion_id: null } }
		],
		deleted: [
			{ id: "guid", badge: "guid" }
		]
	},
	arrivals: {
		inserted: [
			{ id: "guid", badge: "guid", data: { name: 'новое имя', notion_id: null } }
		],
		updated: [
			{ id: "guid", badge: "guid", data: { name: 'новое имя', notion_id: null } }
		],
		deleted: [
			{ id: "guid", badge: "guid" }
		]
	}
}
```