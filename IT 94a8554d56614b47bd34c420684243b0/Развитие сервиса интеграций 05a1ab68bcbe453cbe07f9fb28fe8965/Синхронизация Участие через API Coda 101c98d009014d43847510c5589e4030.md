# Синхронизация Участие через API Coda

ID: 31
Assignee: Alexey Serikov
Status: Разработка
Blocked by: API для Участия (API%20%D0%B4%D0%BB%D1%8F%20%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%B8%D1%8F%201145d0c165d44a0fa79fe560dfa4a436.md), Разработка плагина  Coda для Участия (%D0%A0%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0%20%D0%BF%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD%D0%B0%20Coda%20%D0%B4%D0%BB%D1%8F%20%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%B8%D1%8F%2026383935eeac48bba404964106cf19d9.md)
Blocking: Скрипт загрузки данных Участия за 23 и 24 год из дампа файла Coda (%D0%A1%D0%BA%D1%80%D0%B8%D0%BF%D1%82%20%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%B8%D1%8F%20%D0%B7%D0%B0%2023%20%D0%B8%2024%20%D0%B3%D0%BE%D0%B4%20%D0%B8%D0%B7%20%D0%B4%20d175e6771a18468698810f106b498581.md)
Tags: Updater

## Описание

Есть предложение работать с Кодой с помощью их API через наше приложение. API у них типичный, требуется только авторизация по токену и указывать айди документов(таблиц) откуда надо забирать данные или сохранять данные 

### Тригер

Предполагается, что на нашей стороне будет эдпоинт, который будет инициировать сборку данных в API. Этот эдпоинт будет запускать js плагин в самой Coda руками HRов

### Дублирование данных

Продумать момент, чтобы не забирать данные, которые уже есть в базе, а так же не обновлять что не требует обновление. Может не стоит усложнять и каждый раз забирать все-все Участия и это не будет сильно тормозить. Но пока видится, что можно улучшить и забирать и обновлять только актуальные. В этом может помочь Леша @Alexey Serikov 

### Двусторонняя связь

Также надо учесть, что у нас будет двусторонняя связь, где мы забираем Участие и наоборот обновляем или создаем новое Участие в Кода

## Разработка

Предполагаю, что нужен будет класс(модуль, пакет), который будет уметь получать токен и авторизовываться в коде. А также иметь методы, которые позволяют работать с документами. Может даже сделать еще один класс, в котором прописать методы для доступа к конкретным таблицам, дока. Так как количество таблиц и их айди постоянные

### Updater или App?

Нужно решить чья эта зона ответственности апдейтера или нашего API приложения. Точно нужно сделать эндпоинт в апп, но оттуда можно и апдейтер запустить? Тоже вопросы к Леши или Вотори 

## Ссылки

Общая дока на API [https://coda.io/developers/apis/v1#section/Introduction](https://coda.io/developers/apis/v1#section/Introduction)

Доступ к таблицам, предположительно что Участие является некой таблицей [https://coda.io/developers/apis/v1#tag/Tables](https://coda.io/developers/apis/v1#tag/Tables)