# Инфрастурктура

## Внешняя машина

[**srv.rumyantsev.com**](http://srv.rumyantsev.com/)

**Интеграционный сервис**

[https://srv.rumyantsev.com/api/v1/docs](https://srv.rumyantsev.com/api/v1/docs)
[https://srv.rumyantsev.com/api/v1/redoc](https://srv.rumyantsev.com/api/v1/redoc)

l/p admin/admin

## Внутренняя сеть

### Люди с доступом во внутреннюю сеть

| Имя | Команда или должность | Телеграм или другое |
| --- | --- | --- |
| Алексей Черепанов | Кормитель/разработка | @cherepusick |
| Андрей Хамидулин  | Интранет/фргнтенд | @andrey_khamidulin  |
| Альбина | Интранет | @heloiise |
| Диана | Интр(a|o)нет/фронтенд | @ravenInPants |
| Катя Корица | Кормитель | @kori4k |

### Описание

домен **insomniafest.lan**

Кешируюший прокси (nexus) - **nexus.insomniafest.lan**
Доступен снаружи по [https://work.point.rumyantsev.com:8443](https://work.point.rumyantsev.com:8443/)
admin:GLI9uSY8lUNcJg7W

К кешу сейчас подвязан куб, там есть репы yum, кеш docker, кеш pypi
Можно добавить кеш alpine apk и npm/yarn

Куб - это три ноды
мастер - master01.k8s.insomniafest.lan
два воркера - worker01.k8s.insomniafest.lan и worker02.k8s.insomniafest.lan

Управлять кубом можно прямо с work

В кубе установлены ингресы, снаружи доступны по [https://work.point.rumyantsev.com](https://work.point.rumyantsev.com/), т.е. прописав адрес в hosts для опубликованного имени ты получишь сервис. Установил LB в виде metallb, Установлен LVM-CSI, т.е. можно пользоваться PVC и хранить там данные.

Все машины под контролем freeipa - внутренний dns, сертификаты, пользователи.

В кубе установлен SubCA от основного домена, всё спокойно тянет через nexus. Но при сборке образов надо добавлять CA в образ