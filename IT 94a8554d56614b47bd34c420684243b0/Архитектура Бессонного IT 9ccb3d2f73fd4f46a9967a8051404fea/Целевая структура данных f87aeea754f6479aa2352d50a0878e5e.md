# Целевая структура данных

Здесь только глобально синхронизируемые таблицы и атрибуты. В ноушене будут ещё таблицы, и у локальных копий этих сущностей будут ещё атрибуты

## Службы и локации

direction

| Атрибут | Содержимое | Тип данных | Cardinality | Пояснение |
| --- | --- | --- | --- | --- |
| name | Название | Строка | Req |  |
| type | Тип | [Справочник](%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA%D0%B8%200d3d3c5b2cba4cd48080a16d3d5e67e4.md) | Opt FK |  |
| first_year | Год появления | Число | Opt |  |
| last_year | Последний год | Число | Opt |  |
| notion_id | Идентификатор Notion | Строка UUID | Req | Для синхронизации с Notion |

## Человеки

person

| Атрибут | Содержимое | Тип данных | Cardinality | Пояснение |
| --- | --- | --- | --- | --- |
| name | Как звать | Строка | Req | Как обычно человека называют в команде |
| last_name | Фамилия | Строка | Opt |  |
| first_name | Имя | Строка | Opt |  |
| nickname | Позывной | Строка | Opt |  |
| other_names | Альтернативные обращения | JSONB (список) | Opt | Прочие известные прозвища |
| gender | Пол | Справочник | Opt | М/Ж/др |
| birth_date | Дата рождения | date | Opt |  |
| city | Город | Строка | Opt | *возможно контакты* |
| telegram | Телеграм | Строка | Opt | *стоит выделить*  |
| phone | Телефон | Строка | Opt | *отдельной структурой* |
| email | Мейл | Строка | Opt |  |
| diet | Особенности питания | Справочник | Opt |  два варианта: 
- “Без особенностей”
- “Веган” |
| comment | Комментарий | Строка | Opt |  |
| notion_id | Идентификатор Notion | Строка UUID | Req | Для синхронизации с Notion |

### Фото

- Чьё фото (ссылка на человека)
- Дата загрузки
- Файл

### Связи

- Человек 1 (ответственный)
- Тип связи (справочник)
- Человек 2 (плюсодин)

## Участие

engagement

| Атрибут | Содержимое | Тип данных | Cardinality | Пояснение |
| --- | --- | --- | --- | --- |
| year |  Год | Число | Req | год фестиваля |
| person | Человек | [Человеки](%D0%A6%D0%B5%D0%BB%D0%B5%D0%B2%D0%B0%D1%8F%20%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20f87aeea754f6479aa2352d50a0878e5e.md) | Req FK |  |
| direction | Служба/локация | [Службы](%D0%A6%D0%B5%D0%BB%D0%B5%D0%B2%D0%B0%D1%8F%20%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20f87aeea754f6479aa2352d50a0878e5e.md) | Req FK |  |
| role | Роль | [Справочник](%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA%D0%B8%200d3d3c5b2cba4cd48080a16d3d5e67e4.md) | Req FK |  |
| position | Должность | Срока | Opt |  |
| status | Статус | [Справочник](%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA%D0%B8%200d3d3c5b2cba4cd48080a16d3d5e67e4.md) | Req FK |  |
| noiton_id | Идентификатор Notion | Строка UUID | Opt | Для синхронизации с Notion |

## Бейджи

badge

| Атрибут | Содержимое | Тип данных | Cardinality | Пояснение |
| --- | --- | --- | --- | --- |
| name | Надпись | Строка | Req | Что напечатано на бейдже |
| last_name | Фамилия | Строка | Opt | Для поиска |
| first_name | Имя | Строка | Opt | Для поиска |
| ~~nickname~~ | ~~Позывной~~ | ~~Строка~~ | ~~Opt~~ | Для поиска  |
| gender | Пол | Список | Opt | М/Ж/др |
| phone | Телефон | Строка | Opt |  |
| infant | Ребенок | boolean | Req | Признак, что это ребенок |
| diet | Особенности питания | Справочник | Req | два варианта: 
- “Без особенностей”
- “Веган” |
| feed | Тип питания | Справочник | Req | Бесплатно /Платно / Без питания |
| number | Номер | Строка | Opt | Номер бейджа для поиска в пачке |
| batch | Партия | int | Opt | В какой заход отправлено в печать  |
| role | Роль | [Справочник](%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA%D0%B8%200d3d3c5b2cba4cd48080a16d3d5e67e4.md) | Req FK | Из роли получаем цвет |
| position | Должность | Строка | Opt | Надпись на бейдже (если пусто, используется роль) |
| photo | Фото | Файл | Opt | ссылка на файл |
| person | Человек | [Человеки](%D0%A6%D0%B5%D0%BB%D0%B5%D0%B2%D0%B0%D1%8F%20%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20f87aeea754f6479aa2352d50a0878e5e.md) | Opt FK |  |
| - | Направления | [Службы и локации](%D0%A6%D0%B5%D0%BB%D0%B5%D0%B2%D0%B0%D1%8F%20%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20f87aeea754f6479aa2352d50a0878e5e.md) | Many2many |  |
| comment | Комментарий | Строка | Opt |  |
| notion_id | Идентификатор Notion | Строка UUID | Req | Для синхронизации с Notion |
| parent | С кем | [Бейдж](%D0%A6%D0%B5%D0%BB%D0%B5%D0%B2%D0%B0%D1%8F%20%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20f87aeea754f6479aa2352d50a0878e5e.md) | Opt | Чей это ребенок/плюсодин |

### Связи

*пока не реализуем*

- Бейдж 1 (ответственный)
- Тип связи (справочник)
- Бейдж 2 (плюсодин)

## Заезды

Arrivals

| Атрибут | Содержимое | Тип данных | Cardinality | Пояснение |
| --- | --- | --- | --- | --- |
| badge |  Бейдж |  [Бейдж](%D0%A6%D0%B5%D0%BB%D0%B5%D0%B2%D0%B0%D1%8F%20%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20f87aeea754f6479aa2352d50a0878e5e.md) | Req |  |
| engagement | Участие | [Участие](%D0%A6%D0%B5%D0%BB%D0%B5%D0%B2%D0%B0%D1%8F%20%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20f87aeea754f6479aa2352d50a0878e5e.md) | Opt | К какой службе относится заезд |
| status | Статус | [Справочник](%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA%D0%B8%200d3d3c5b2cba4cd48080a16d3d5e67e4.md) | Req FK | тот же справочник, что для Участия |
| arrival_date | Дата заезда | date | Req | Предварительно планируется |
| arrival_transport | Способ заезда | [Справочник](%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA%D0%B8%200d3d3c5b2cba4cd48080a16d3d5e67e4.md) | Opt |  |
| arrival_registered | Отметка о заезде | timestamp | Opt | При регистрации в Бюро |
| departure_date | Дата отъезда | date | Req | Предварительно планируется |
| departure_transport | Способ выезда | [Справочник](%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA%D0%B8%200d3d3c5b2cba4cd48080a16d3d5e67e4.md) | Opt |  |
| departure_registered | Отметка об отъезде | timestamp | Opt | При досрочном отъезде |
| extra_data | Для автобуса | JSONB | Opt | Персональные данные для транспортной компании (желательно хранить шифровано) |
| comment | Комментарии | Строка | Opt |  |